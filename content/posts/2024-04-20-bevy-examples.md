+++
title = "Bevy Examples"
date = 2024-04-20
description = ""

[taxonomies]
tags = ["Bevy", "Game"]
+++


ç®€å•åˆ†æä¸‹è¿™äº›æ —å­ï¼Œä¸ºåç»­çš„å°æ¸¸æˆåšå‡†å¤‡ï¼š
https://github.com/bevyengine/bevy/blob/main/examples/2d/2d_shapes.rs#L8

# 2d_shapes.rs
ç®€å•æ˜¯Setupä¸€ä¸‹ï¼ŒæŠŠç›¸æœºğŸ“·è®¾å®šåˆ°2Dï¼Œæ·»åŠ ä¸åŒå½¢çŠ¶çš„2D meshä»¥åŠçº¯è‰²Material

# 2d_viewport_to_world.rs
ç”»ä¸€ä¸ªè·Ÿéšé¼ æ ‡çš„Gizmos

# bloom_2d.rs
åšäº†ä¸€ä¸ªå¯ä»¥é€šè¿‡é”®ç›˜è°ƒèŠ‚æ³›å…‰æ•ˆæœå‚æ•°çš„æ —å­

### ChatGPT è§£é‡Š
Bloom effectï¼ˆæ³›å…‰æ•ˆæœï¼‰æ˜¯ä¸€ç§åœ¨æ•°å­—å›¾åƒå’Œè§†é¢‘æ¸¸æˆä¸­å¸¸è§çš„è§†è§‰æ•ˆæœï¼Œç”¨æ¥æ¨¡æ‹Ÿåœ¨ç°å®ç”Ÿæ´»ä¸­ç”±äºç›¸æœºé•œå¤´æˆ–äººçœ¼å¯¹å…‰çº¿å¤„ç†æ–¹å¼è€Œäº§ç”Ÿçš„ä¸€ç§ç°è±¡ã€‚å½“åœ¨ç…§ç‰‡æˆ–è§†é¢‘ä¸­é‡åˆ°éå¸¸äº®çš„å…‰æºæ—¶ï¼Œè¿™äº›å…‰æºå‘¨å›´ä¼šå‡ºç°ä¸€ç§å…‰æ™•æˆ–å‘å…‰çš„æ•ˆæœï¼Œè¿™å°±æ˜¯æ‰€è°“çš„æ³›å…‰æ•ˆæœã€‚

### æ³›å…‰æ•ˆæœçš„å·¥ä½œåŸç†
æ³›å…‰æ•ˆæœé€šå¸¸é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®ç°ï¼š
1. **æå–é«˜äº®**ï¼šé¦–å…ˆä»å›¾åƒä¸­æå–å‡ºé«˜äº®åŒºåŸŸï¼Œé€šå¸¸æ˜¯é‚£äº›äº®åº¦è¶…è¿‡ä¸€å®šé˜ˆå€¼çš„éƒ¨åˆ†ã€‚
2. **æ¨¡ç³Šå¤„ç†**ï¼šå°†æå–å‡ºçš„é«˜äº®åŒºåŸŸè¿›è¡Œæ¨¡ç³Šå¤„ç†ï¼Œä½¿å¾—å…‰æºå‘¨å›´å½¢æˆå…‰æ™•ã€‚
3. **å åŠ å¤„ç†**ï¼šå°†æ¨¡ç³Šåçš„å›¾åƒä¸åŸå§‹å›¾åƒå åŠ ï¼Œåˆ›å»ºå‡ºå…‰æºå‘¨å›´çš„å‘å…‰æ•ˆæœã€‚

### åº”ç”¨åœºæ™¯
æ³›å…‰æ•ˆæœåœ¨å¤šç§åº”ç”¨åœºæ™¯ä¸­éƒ½éå¸¸æ™®éï¼Œä¾‹å¦‚ï¼š
- **ç”µå½±å’Œç”µè§†**ï¼šä¸ºäº†å¢å¼ºç”»é¢çš„è§†è§‰å†²å‡»åŠ›æˆ–è¡¨è¾¾ç‰¹å®šçš„æ°›å›´å’Œæƒ…æ„Ÿã€‚
- **è§†é¢‘æ¸¸æˆ**ï¼šå¢åŠ æ¸¸æˆçš„è§†è§‰çœŸå®æ„Ÿå’Œç¾æ„Ÿï¼Œå°¤å…¶æ˜¯åœ¨è¡¨ç°å¼ºçƒˆå…‰æºæˆ–é­”æ³•æ•ˆæœæ—¶ã€‚
- **å›¾å½¢è®¾è®¡**ï¼šåœ¨å¹¿å‘Šæˆ–è‰ºæœ¯ä½œå“ä¸­åˆ›å»ºç‰¹å®šçš„è§†è§‰é£æ ¼ã€‚

### æŠ€æœ¯å®ç°
åœ¨è®¡ç®—æœºå›¾å½¢å­¦ä¸­ï¼Œæ³›å…‰æ•ˆæœé€šå¸¸é€šè¿‡ç€è‰²å™¨ï¼ˆShadersï¼‰å®ç°ã€‚ç€è‰²å™¨æ˜¯è¿è¡Œåœ¨å›¾å½¢å¤„ç†å™¨ï¼ˆGPUï¼‰ä¸Šçš„ç¨‹åºï¼Œèƒ½å¤Ÿé«˜æ•ˆåœ°å¤„ç†å›¾åƒæ•°æ®ï¼Œç”Ÿæˆæ³›å…‰ç­‰æ•ˆæœã€‚åœ¨æ¸¸æˆå¼•æ“ä¸­ï¼Œå¦‚Unityæˆ–Unreal Engineï¼Œé€šå¸¸æä¾›äº†å†…ç½®çš„æ³›å…‰æ•ˆæœå·¥å…·ï¼Œå…è®¸å¼€å‘è€…è½»æ¾åœ°æ·»åŠ å’Œé…ç½®æ³›å…‰æ•ˆæœï¼Œä»¥é€‚åº”ä¸åŒçš„æ¸¸æˆåœºæ™¯å’Œå…‰ç…§æ¡ä»¶ã€‚

æ€»ä¹‹ï¼Œæ³›å…‰æ•ˆæœæ˜¯æ•°å­—å›¾åƒå¤„ç†ä¸­ä¸€ä¸ªé‡è¦ä¸”å¸¸ç”¨çš„æŠ€æœ¯ï¼Œå®ƒé€šè¿‡æ¨¡æ‹Ÿç°å®ä¸–ç•Œä¸­çš„å…‰çº¿æ•£å°„ç°è±¡ï¼Œå¢å¼ºäº†è§†è§‰å†…å®¹çš„ä¸°å¯Œæ€§å’Œå¸å¼•åŠ›ã€‚


# bounding_2d.rs
å±•ç¤ºäº†ä¸åŒçš„æ‹¦æˆªæ£€æµ‹çš„æ–¹æ³•ã€‚

æœ‰ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹æ˜¯ç”Ÿæˆå®`Default`å¯ä»¥æ ‡è®°`Enum`çš„é»˜è®¤é€‰é¡¹

```rust
#[derive(States, Default, Debug, Hash, PartialEq, Eq, Clone, Copy)]
enum Test {
    AabbSweep,
    CircleSweep,
    #[default]
    RayCast,
    AabbCast,
    CircleCast,
}
```

è¿˜æœ‰ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„ç‚¹æ˜¯ECSçš„Behaviorçš„`.run_if`

```rust
ray_cast_system.run_if(in_state(Test::RayCast))
```

### Gizmo vs Gizmos

#### Gizmo è¾…åŠ©å·¥å…·
åœ¨è®¡ç®—æœºå›¾å½¢å’Œæ¸¸æˆå¼€å‘ä¸­ï¼Œ"Gizmo"ï¼ˆæˆ–ç§°ä¸ºæ§åˆ¶å°å·¥å…·ï¼‰æ˜¯ä¸€ç§å¯è§†åŒ–å·¥å…·ï¼Œç”¨äºåœ¨ç¼–è¾‘ç¯å¢ƒä¸­å¸®åŠ©å¼€å‘è€…ä»¥äº¤äº’æ–¹å¼æ“æ§å’Œè°ƒæ•´åœºæ™¯å¯¹è±¡çš„å±æ€§ã€‚Gizmo é€šå¸¸ç”¨äºè¡¨ç¤ºå’Œç¼–è¾‘ç‰©ä½“çš„ä½ç½®ã€æ—‹è½¬ã€ç¼©æ”¾ç­‰å˜æ¢å±æ€§ã€‚

##### Gizmo çš„ä¸»è¦ç”¨é€”ï¼š

1. **å˜æ¢æ§åˆ¶**ï¼š
   - Gizmo å…è®¸ç”¨æˆ·é€šè¿‡ç›´è§‚çš„å›¾å½¢ç•Œé¢ï¼ˆé€šå¸¸æ˜¯ä¸‰ç»´ç®­å¤´å’Œæ—‹è½¬åœˆï¼‰æ¥ç§»åŠ¨ã€æ—‹è½¬å’Œç¼©æ”¾åœºæ™¯ä¸­çš„å¯¹è±¡ã€‚
   - è¿™äº›æ§ä»¶æ˜ å°„åˆ°å¯¹è±¡çš„æœ¬åœ°æˆ–ä¸–ç•Œåæ ‡ç³»ï¼Œä½¿ç¼–è¾‘æ›´åŠ ç›´è§‚å’Œç²¾ç¡®ã€‚

2. **è§†è§‰è°ƒè¯•**ï¼š
   - åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒGizmo ç”¨äºæ˜¾ç¤ºè¯¸å¦‚åŠ›çš„æ–¹å‘ã€é€Ÿåº¦å‘é‡ã€ç¢°æ’ä½“ç§¯ç­‰ä¸æ˜“ç›´è§‚ç†è§£çš„æŠ½è±¡æ¦‚å¿µã€‚
   - è¿™å¯ä»¥å¸®åŠ©å¼€å‘è€…ç†è§£æ¸¸æˆæˆ–åº”ç”¨çš„è¡Œä¸ºï¼Œå¹¶å¯¹å…¶è¿›è¡Œè°ƒæ•´ã€‚

3. **ç¼–è¾‘å™¨åŠŸèƒ½**ï¼š
   - åœ¨æ¸¸æˆå¼•æ“å’Œ3Då»ºæ¨¡è½¯ä»¶ä¸­ï¼ŒGizmo æ˜¯æ ‡å‡†å·¥å…·ï¼Œç”¨äºåœ¨è®¾è®¡é˜¶æ®µè°ƒæ•´å’Œä¼˜åŒ–æ¨¡å‹å’Œåœºæ™¯å¸ƒå±€ã€‚
   - Gizmo æé«˜äº†å·¥ä½œæµç¨‹çš„æ•ˆç‡ï¼Œä½¿å¾—å¤æ‚åœºæ™¯çš„ç¼–è¾‘å˜å¾—æ›´åŠ å®¹æ˜“ã€‚

##### Gizmo çš„ç±»å‹ï¼š
- **ä½ç½®Gizmo**ï¼šå…è®¸ç”¨æˆ·é€šè¿‡æ‹–åŠ¨ç®­å¤´æ²¿ç‰¹å®šè½´ç§»åŠ¨å¯¹è±¡ã€‚
- **æ—‹è½¬Gizmo**ï¼šå±•ç¤ºç¯å½¢æ§ä»¶ï¼Œç”¨æˆ·å¯ä»¥å›´ç»•ä¸€è½´æ—‹è½¬å¯¹è±¡ã€‚
- **ç¼©æ”¾Gizmo**ï¼šæä¾›å¯æ‹–åŠ¨çš„æ‰‹æŸ„ï¼Œç”¨äºåœ¨ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹å‘ä¸Šè°ƒæ•´å¯¹è±¡çš„å¤§å°ã€‚
- **è‡ªå®šä¹‰Gizmo**ï¼šé’ˆå¯¹ç‰¹å®šåº”ç”¨æˆ–æ¸¸æˆå¼€å‘ä»»åŠ¡å®šåˆ¶çš„å·¥å…·ï¼Œå¦‚è·¯å¾„ç¼–è¾‘ã€å…‰çº¿æŠ•å°„ç­‰ã€‚

åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œæœ‰æ•ˆä½¿ç”¨Gizmo æ˜¯æé«˜ç”Ÿäº§æ•ˆç‡ã€ç¡®ä¿ç²¾ç¡®é…ç½®å’Œå¢å¼ºåœºæ™¯äº¤äº’æ€§çš„å…³é”®å·¥å…·ã€‚

#### Gizmos è¾…åŠ©çº¿
åœ¨ç¼–ç¨‹å’Œæ¸¸æˆå¼€å‘ä¸­ï¼Œ**Gizmos** æ˜¯ç”¨äºåœ¨ç¼–è¾‘æ¨¡å¼æˆ–è°ƒè¯•æ—¶åœ¨3Dåœºæ™¯ä¸­å¯è§†åŒ–å„ç§è¾…åŠ©çº¿å’Œå‡ ä½•å½¢çŠ¶çš„å·¥å…·ã€‚å®ƒä»¬å¸®åŠ©å¼€å‘è€…ç›´è§‚åœ°çœ‹åˆ°éç›´è§‚çš„æ•°æ®ï¼Œå¦‚ç¢°æ’åŒºåŸŸã€åŠ›çš„æ–¹å‘ã€å…‰çº¿æŠ•å°„æˆ–è€…å¯¹è±¡çš„è½´ã€‚Gizmos ä¸ä¼šåœ¨æœ€ç»ˆçš„æ¸¸æˆæˆ–åº”ç”¨ç¨‹åºä¸­å‘ˆç°ï¼Œå®ƒä»¬ä»…åœ¨å¼€å‘è¿‡ç¨‹ä¸­ç”¨äºè¾…åŠ©è®¾è®¡å’Œè°ƒè¯•ã€‚

##### Gizmosçš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š

1. **è§†è§‰è¾…åŠ©**ï¼š
   - Gizmosé€šè¿‡åœ¨ç¼–è¾‘å™¨è§†å›¾ä¸­ç»˜åˆ¶ç®€å•çš„å›¾å½¢ï¼ˆå¦‚çº¿æ¡ã€åœ†åœˆã€ç›’å­ç­‰ï¼‰æ¥æ˜¾ç¤ºå…³äºå¯¹è±¡å¦‚ä½•ä¸å…¶ä»–å¯¹è±¡æˆ–ç¯å¢ƒäº’åŠ¨çš„ä¿¡æ¯ã€‚è¿™å¯¹äºè°ƒæ•´ç‰©ç†å¼•æ“å‚æ•°ã€æ‘„åƒæœºè§†è§’ã€å…‰ç…§ä½ç½®ç­‰éå¸¸æœ‰ç”¨ã€‚

2. **äº¤äº’æ§åˆ¶**ï¼š
   - åœ¨3Då»ºæ¨¡å’Œæ¸¸æˆå¼€å‘è½¯ä»¶ä¸­ï¼ŒGizmosæä¾›äº†ä¸€ç§æ“ä½œå¯¹è±¡çš„ç›´è§‚æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨å¹³ç§»ã€æ—‹è½¬å’Œç¼©æ”¾Gizmosï¼Œå¼€å‘è€…å¯ä»¥ç²¾ç¡®åœ°ä¿®æ”¹å¯¹è±¡çš„ä½ç½®ã€å§¿æ€å’Œå¤§å°ã€‚

3. **è°ƒè¯•å’Œä¼˜åŒ–**ï¼š
   - Gizmosæ˜¯è°ƒè¯•è¿‡ç¨‹ä¸­ä¸å¯æˆ–ç¼ºçš„å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥æ˜¾ç¤ºä¸å¯è§çš„æ¸¸æˆé€»è¾‘ï¼Œå¦‚å¯¼èˆªç½‘æ ¼ã€æ„ŸçŸ¥è§‰é‡æˆ–è€…åŠ¨æ€ç”Ÿæˆçš„è·¯å¾„ã€‚è¿™æœ‰åŠ©äºå¼€å‘è€…ç†è§£å’Œè§£å†³æ½œåœ¨çš„é—®é¢˜ã€‚

### ç¤ºä¾‹ç”¨é€”ï¼š
- åœ¨Unityæˆ–Unreal Engineè¿™ç±»æ¸¸æˆå¼•æ“ä¸­ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ç¼–ç¨‹æ–¹å¼æ·»åŠ Gizmosï¼Œä»¥åœ¨æ¸¸æˆä¸–ç•Œä¸­æ ‡ç¤ºç‰¹å®šçš„ä½ç½®æˆ–æ˜¾ç¤ºå¯¹è±¡çš„è¾¹ç•Œæ¡†ã€‚
- åœ¨ç‰©ç†æ¨¡æ‹Ÿä¸­ï¼Œå¯ä»¥ä½¿ç”¨Gizmosæ¥å¯è§†åŒ–åŠ›çš„åº”ç”¨ç‚¹å’Œæ–¹å‘ã€‚
- åœ¨è·¯å¾„è§„åˆ’æˆ–AIå¼€å‘ä¸­ï¼ŒGizmoså¯ä»¥ç”¨æ¥è¡¨ç¤ºAIçš„è§†è§‰æˆ–å¬è§‰èŒƒå›´ã€‚

æ€»çš„æ¥è¯´ï¼ŒGizmosæ˜¯æ¸¸æˆå¼€å‘å’Œ3Då»ºæ¨¡ä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„å·¥å…·ï¼Œå®ƒä»¬é€šè¿‡æä¾›ç›´è§‚çš„è§†è§‰å‚è€ƒæ¥è¾…åŠ©å¼€å‘å’Œè°ƒè¯•è¿‡ç¨‹ï¼Œè™½ç„¶åœ¨æœ€ç»ˆäº§å“ä¸­é€šå¸¸æ˜¯çœ‹ä¸è§çš„ã€‚

# custom_gltf_vertex_attribute.rs

å¯ä»¥æ³¨æ„ä¸€ä¸‹è¿™é‡Œä¼šè¿”å›ä¸€ä¸ª`Builder`ï¼Œåç»­å¯ä»¥ç»§ç»­setå…¶ä»–çš„`Plugin`

```
DefaultPlugins.set
```

å¦å¤–åœ¨è¿™ä¸ªexampleé‡ŒåŠ è½½äº†gltfå’Œwgslä¸¤ä¸ªèµ„æºï¼Œè¿™é‡Œ`mix`çš„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æ··åˆæ¯”ä¾‹ï¼Œ

è€Œåœ¨`smoothstep`ä¸­æ§åˆ¶äº†å½“å‰ç‚¹çš„é‡å¿ƒåæ ‡æœ€å°å€¼å’Œæ—¶é—´çš„å…³ç³»ï¼Œé€šè¿‡æ—¶é—´æ¥å¯¹å›¾å½¢è¿›è¡Œè£å‰ªã€‚

`t>d`çš„éƒ¨åˆ†ä¸º`0`ï¼Œæ˜¾ç¤ºç™½è‰²ï¼Œ`t+0.01<d`çš„éƒ¨åˆ†ä¸ºé»˜è®¤æè´¨ã€‚å¦‚æœè°ƒæ•´`t+0.01`ä¸º`t+0.5`å¯ä»¥çœ‹åˆ°è¾¹ç¼˜åˆå¹¶çš„æ•ˆæœã€‚

```wgsl
@fragment
fn fragment(input: FragmentInput) -> @location(0) vec4<f32> {
    let d = min(input.barycentric.x, min(input.barycentric.y, input.barycentric.z));
    let t = 0.25 * (0.85 + sin(1.0 * globals.time));
    return mix(vec4(1.0,0.0,1.0,1.0), input.color, smoothstep(t, t+0.01, d));
}
```

# mesh2d.rs
æœ€åŸºæœ¬çš„setupï¼Œç”»äº†ä¸ªç´«è‰²æ–¹å—

# mesh2d_manual.rs
ç”»äº†ä¸€ä¸ªé»„è‰²çš„äº”è§’æ˜Ÿ

## é€šè¿‡æ‰‹åŠ¨æ„å»ºé¡¶ç‚¹çš„æ–¹å¼é€ äº†ä¸€ä¸ªäº”è§’æ˜Ÿ

## å†™äº†ä¸€ä¸ªPlugin
åœ¨pluginä¸­æ³¨å†Œäº†`ExtractSchedule` `Render`ä¸¤ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ‰‹åŠ¨å®ç°äº†å¯¹è±¡çš„æå–å’ŒåŠ è½½æ¸²æŸ“å¯¹è±¡åˆ°æ¸²æŸ“é˜Ÿåˆ—çš„è¿‡ç¨‹

# mesh2d_vertex_color_texture.rs
æ­£æ–¹å½¢ä¸Šç”»é¡¶ç‚¹è‰²æˆ–åŠ è½½å›¾ç‰‡

# move_sprite.rs
åŠ è½½ä¸€å¼ å›¾ç‰‡å¹¶å½¢æˆä¸€ä¸ª`SpritBundle`ï¼Œå¦‚ä½•åœ¨`Update`é‡Œç§»åŠ¨å…¶ä½ç½®

# pixel_grid_snap.rs
å…³é—­MSAAä¹‹åæ—‹è½¬Sprit

# rotation.rs
ä¸€ä¸ªæç®€åŒ–ç‰ˆæœ¬çš„å¡”é˜²ï¼Œå››ä¸ªä½ç½®çš„ç‚®å°ä¼šå§‹ç»ˆå°è¯•ç„å‡†ç§»åŠ¨ç‰©

# sprite_sheet.rs
åŠ è½½PNGï¼Œä½¿ç”¨ `TextureAtlasLayout`+`TextureAtlas`ï¼Œ åœ¨Updateçš„æ—¶å€™åˆ‡æ¢éƒ¨åˆ†PNGå†…å®¹æ¥è¿›è¡ŒåŠ¨ç”»çš„æ’­æ”¾

# sprite_slice.rs
å¯¹æè´¨åšå„ç§å˜æ¢å’Œå¤„ç†çš„Demo

# sprite_tile.rs
æè´¨å¹³é“ºDemo

# text2d.rs
æ–‡å­—çš„å„ç§å˜æ¢

# texture_atlas.rs
